<div class="panel panel-default device" ng-class="{ 'panel-success': isAutorun(), 'panel-primary': !isAutorun() && device.regulation == 100 }">
	<div class="panel-heading">
		<div class="pull-left label bigger" ng-class="{ 'label-success': device.autorun, 'label-info': !device.autorun }" title="Okamžitý výkon">
			<span ng-show="device.measurement < 100">{{ device.measurement }}&nbsp;A</span>
			<span ng-show="device.measurement > 100">{{ device.measurement_recount }}&nbsp;W</span>
		</div>
		<div class="pull-left label bigger margin-left-small label-warning" title="Celková energie" ng-if="device.stats.long.kWh > 0">
			{{ device.stats.long.kWh | number:2 }}&nbsp;kWh
		</div>

		<div class="pull-right">
			<a class="btn btn-default btn-xs" ng-click="showStatsModal()" title="Statistiky zařízení"><i class="fa fa-line-chart"></i></a>
			<a class="btn btn-default btn-xs" ng-click="openSettings()" title="Nastavení zařízení"><i class="fa fa-cog"></i></a>
		</div>

		<h4 class="panel-title" title="{{ device.description }}">
			<label>{{ device.alias }}</label>
		</h4>
	</div>
	<div class="panel-body">
		<span style="position:absolute; right:8%;"><input type="checkbox" ng-model="device.autorun" value="1" ng-true-value="1" ng-false-value="0" ng-change="saveDevice()"></span>
		<device-chart data="device.measurement_recount"></device-chart>
		<div class="range-container" ng-if="device.is_linear === 1">
			<span class="font-smaller left">0&nbsp;W</span>
			<input type="range" min="0" max="100" 
				title="{{ device.regulation }}%"
				ng-model="device.regulation" ng-change="regulate()" ng-model-options="{debounce:200}" ng-disabled="isAutorun()"
				/>
			<span class="font-smaller right" title="Maximální výkon zařízení">{{ device.max_consumption }}&nbsp;W</span>
		</div>
		<div ng-if="!device.is_linear" style="margin:0 auto;">
			<div class="switch" ng-class="{ 'on': device.regulation == 0, 'off': device.regulation == 100, 'disabled': loading.toggleOnOff }" ng-click="toggleOnOff()">
				<div class="toggle"></div>
				<span class="on">ZAPNUTO</span>
				<span class="off">VYPNUTO</span>
			</div>
		</div>
		<div ng-if="device.measurements.is_measured" style="display:flex; justify-content: space-between; margin-top:20px;">
				<measurement type="'V'" label="'Napětí'" warning-text="'Bez napětí!'" error-text="'No signal!'" data="device.measurements.voltage"></measurement>
				<measurement type="'A'" label="'Proud'" data="device.measurements.current"></measurement>
				<measurement type="'J/s'" label="'Energie'" data="device.measurements.energy"></measurement>
				<measurement type="'Hz'" label="'0 Hz !!'" warning-text="'Výpadek sítě'" error-text="'Výpadek napájení!'" data="device.measurements.frequency"></measurement>
			</div>
	</div>
</div>